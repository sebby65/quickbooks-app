<!DOCTYPE html>
<html>
<head>
    <title>Financial Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body { font-family: sans-serif; padding: 2rem; }
        h1 { font-size: 2rem; margin-bottom: 1rem; }
        .message { font-size: 1.2rem; margin-top: 1rem; }
        .positive { color: green; }
        .neutral { color: orange; }
        .negative { color: red; }
    </style>
    <script>
        async function generateForecast() {
            const response = await fetch('/forecast', { method: 'POST' });
            window.location.reload();
        }
    </script>
</head>
<body>
    <h1>Financial Forecast Dashboard</h1>
    <form method="POST" action="/forecast">
        <button type="submit">Generate Forecast</button>
    </form>

    {% if error %}
        <p class="message negative">{{ error }}</p>
    {% elif forecast is not none %}
        <div class="message">
            {% if forecast < 0 %}
                <p class="negative">Warning: Expenses exceed income. Consider trimming costs.</p>
            {% elif forecast < 500 %}
                <p class="neutral">You're slightly profitable. Letâ€™s look at scaling revenue.</p>
            {% else %}
                <p class="positive">Great job! You're generating healthy cash flow.</p>
            {% endif %}
        </div>
        <ul>
            <li><strong>Forecast:</strong> ${{ forecast }}</li>
            <li><strong>Total Revenue:</strong> ${{ revenue }}</li>
            <li><strong>Total Expenses:</strong> {{ cost }}</li>
            <li><strong>Invoice Count:</strong> {{ invoice_count }}</li>
        </ul>
    {% endif %}
</body>
</html>
